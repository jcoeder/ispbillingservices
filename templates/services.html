{% extends "base.html" %}

{% block title %}Services - Account {{ account.account_id }} - ISP Invoice Tracker{% endblock %}

{% block content %}
<h2>Services for Account {{ account.account_id }}</h2>

<h3>Add New Service</h3>
<form method="POST">
    <div>
        <label for="type">Service Type:</label>
        <select id="type" name="type" required>
            <option value="phone">Phone</option>
            <option value="sip">SIP</option>
            <option value="internet">Internet</option>
            <option value="wan">WAN</option>
        </select>
    </div>
    <div>
        <label for="service_id">Service ID:</label>
        <input id="service_id" name="service_id" placeholder="Service ID">
    </div>
    <div>
        <label for="phone_number">Phone Number:</label>
        <input id="phone_number" name="phone_number" placeholder="Phone Number">
    </div>
    <div>
        <label for="a_location">A Location:</label>
        <input id="a_location" name="a_location" placeholder="A Location">
    </div>
    <div>
        <label for="z_location">Z Location:</label>
        <input id="z_location" name="z_location" placeholder="Z Location">
    </div>
    <div>
        <label for="account_number">Account Number:</label>
        <input id="account_number" name="account_number" placeholder="Account Number" value="{{ account.account_id }}">
    </div>
    <div>
        <label for="description">Description:</label>
        <textarea id="description" name="description" placeholder="Description"></textarea>
    </div>
    <button type="submit">Add Service</button>
</form>

<h3>Existing Services</h3>
{% if services %}
<table class="table">
    <thead>
        <tr>
            <th>Type</th>
            <th>Service ID</th>
            <th>Phone Number</th>
            <th>A Location</th>
            <th>Z Location</th>
            <th>Account Number</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for service in services %}
        <tr>
            <td>{{ service.type }}</td>
            <td>{{ service.service_id or 'N/A' }}</td>
            <td>{{ service.phone_number or 'N/A' }}</td>
            <td>{{ service.a_location or 'N/A' }}</td>
            <td>{{ service.z_location or 'N/A' }}</td>
            <td>{{ service.account_number or 'N/A' }}</td>
            <td>{{ service.description or 'N/A' }}</td>
            <td class="actions">
                <a href="{{ url_for('edit_service', service_id=service.id) }}">Edit</a>
                <form method="POST" action="{{ url_for('delete_service', service_id=service.id) }}" style="display: inline;">
                    <button type="submit" class="btn-danger" onclick="return confirm('Are you sure you want to delete this service?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No services added yet.</p>
{% endif %}

<div class="actions">
    <a href="{{ url_for('manage_accounts', vendor_id=account.vendor_id) }}">Back to Accounts</a>
</div>
{% endblock %}